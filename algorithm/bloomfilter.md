# Bloom filter

BloomFilterとは集合にある要素が含まれるかを判別する確率的データ構造である。
偽陽性を許容する代わりに空間効率を向上させる。

## Data structure

全体の集合を`S`とする。
Bloom filterは`n, k`を定数として以下からなる。

- `n` bitのTable: `T: [0, n) -> {0, 1}`
- `k`個のhash関数: `h_i: S -> [0, n] (i=0, 1, .., k-1)`

### Put

データのputは入力`a`について以下の手順で行われる。

- `i=0, 1, ..., k-1`について
  - `T[h_i(a)] = 1`と更新する

### Check

入力`a`が集合`S'`に含まれるかは以下を満たすかで判定できる。

- `i=0, 1, ..., k-1`について
  - `T[h_i(a)] = 1`である

### About Constants

- `k`を増やすと計算時間が増加する
- `n`を増やすと性能が向上するが空間使用量が増加する

また`k`はある一定まで増やすまでは偽陽性率を低下させるが、一定以上からは偽陽性率を増加させる。

## Bloom Filterの何が偉いか？

Bloom Filterは集合サイズ程度のオーダーのbit数がないとまともな結果を返さない。あくまで定数倍お得というのが味噌。
入力のデータ長にかかわらず、管理したい集合の大きさに応じて性能が変化する。

